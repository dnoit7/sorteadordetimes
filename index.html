<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerador de Times âš½</title>

<style>
    body {
        background:#f2f2f2;
        margin:0;
        font-family:Arial, sans-serif;
        padding:16px;
    }

    h2 {
        text-align:center;
        margin-bottom:20px;
        font-weight:bold;
    }

    .card {
        background:#fff;
        border-radius:14px;
        padding:16px;
        margin-bottom:18px;
        box-shadow:0 2px 5px rgba(0,0,0,0.08);
    }

    textarea {
        width:100%;
        border-radius:10px;
        padding:10px;
        resize:none;
        font-size:15px;
    }

    button {
        width:100%;
        padding:12px;
        border:none;
        border-radius:10px;
        font-size:16px;
        cursor:pointer;
        margin-top:8px;
    }

    .btn-primary { background:#007bff; color:#fff; }
    .btn-warning { background:#ffb300; color:#000; }
    .btn-success { background:#28a745; color:#fff; }
    .btn-info { background:#0dcaf0; color:#000; }

    /* PLAYER ROW */
    .player-row{
        display:flex;
        align-items:center;
        gap:10px;
        padding:10px;
        background:#fafafa;
        border-radius:10px;
        margin-bottom:10px;
        flex-wrap:wrap;
    }

    .player-check{
        transform:scale(1.3);
        margin-right:6px;
    }

    .player-name{
        flex:1 1 260px;
        padding:8px;
        border-radius:8px;
        border:1px solid #ddd;
        font-size:15px;
    }

    .player-level{
        width:110px;
        padding:8px;
        border-radius:8px;
        border:1px solid #ddd;
        font-size:15px;
    }

    .player-delete{
        font-size:22px;
        background:none;
        border:none;
        cursor:pointer;
    }

    /* RESULT BOX */
    #teamsOutput{
        white-space:pre-line;
        background:#f7f7f7;
        padding:15px;
        border-radius:12px;
        font-size:16px;
    }

    /* MOBILE FIX */
    @media (max-width:600px){
        .player-row{
            flex-direction:row;
            justify-content:space-between;
        }
    }
</style>
</head>
<body>

<h2>Gerador de Times âš½</h2>

<div class="card">
    <h3>Importar Lista</h3>
    <textarea id="rawList" rows="7" placeholder="Cole aqui a lista do WhatsApp..."></textarea>
    <button class="btn-primary" onclick="importList()">Importar Lista</button>
    <button class="btn-warning" onclick="clearAll()">Limpar Tudo</button>
</div>

<div class="card">
    <h3>Jogadores</h3>
    <div id="playersContainer"></div>
</div>

<div class="card">
    <h3>Times</h3>

    <label>Quantidade de times:</label>
    <select id="teamCount" style="padding:10px; border-radius:10px; width:100%; margin-bottom:10px;">
        <option value="2">2 Times</option>
        <option value="3">3 Times</option>
        <option value="4">4 Times</option>
    </select>

    <button class="btn-success" onclick="generateTeams()">Gerar Times</button>
    <button class="btn-info" onclick="copyTeams()">Copiar para WhatsApp</button>

    <div id="teamsOutput" style="margin-top:15px;"></div>
</div>

<script>
let players = [];
let nextId = 1;

function importList(){
    let text = document.getElementById("rawList").value;

    if(!text.trim()){
        alert("Cole a lista primeiro!");
        return;
    }

    let lines = text.split("\n");

    lines.forEach(line=>{
        let clean = line
            .replace(/^\s*\d+[\)\.\-]*\s*/g,"") 
            .replace(/[^\p{L}\s]/gu,"")       
            .trim();

        if(clean.length > 0){
            players.push({
                id:nextId++,
                name:clean,
                level:2,    
                active:true
            });
        }
    });

    renderPlayers();
}

function clearAll(){
    players = [];
    document.getElementById("rawList").value = "";
    renderPlayers();
    document.getElementById("teamsOutput").textContent = "";
}

function renderPlayers(){
    const box = document.getElementById("playersContainer");
    box.innerHTML = "";

    players.forEach(p=>{
        const row = document.createElement("div");
        row.className = "player-row";

        // checkbox
        const check = document.createElement("input");
        check.type = "checkbox";
        check.checked = p.active;
        check.className = "player-check";
        check.onchange = ()=>{ p.active = check.checked; };

        // name
        const name = document.createElement("input");
        name.className = "player-name";
        name.value = p.name;
        name.oninput = ()=>{ p.name = name.value; };

        // level
        const lvl = document.createElement("select");
        lvl.className = "player-level";
        lvl.innerHTML = `
            <option value="1">NÃ­vel A</option>
            <option value="2">NÃ­vel B</option>
            <option value="3">NÃ­vel C</option>
            <option value="4">NÃ­vel D</option>
        `;
        lvl.value = p.level;
        lvl.onchange = ()=>{ p.level = parseInt(lvl.value); };

        // delete button (emoji)
        const del = document.createElement("button");
        del.className = "player-delete";
        del.textContent = "ðŸ—‘ï¸";
        del.onclick = ()=>{
            if(confirm("Apagar jogador?")){
                players = players.filter(x=>x.id !== p.id);
                renderPlayers();
            }
        };

        row.appendChild(check);
        row.appendChild(name);
        row.appendChild(lvl);
        row.appendChild(del);
        box.appendChild(row);
    });
}

function generateTeams(){
    const qt = parseInt(document.getElementById("teamCount").value);

    let activePlayers = players.filter(p=>p.active).map(p=>p.name);

    if(activePlayers.length < qt){
        alert("Jogadores insuficientes para dividir em " + qt + " times!");
        return;
    }

    activePlayers.sort(()=>Math.random()-0.5);

    let teams = Array.from({length:qt}, ()=>[]);

    activePlayers.forEach((name,i)=>{
        teams[i % qt].push(name);
    });

    let out = "";
    teams.forEach((t,i)=>{
        out += `âš½ *Time ${i+1}:*\n${t.join("\n")}\n\n`;
    });

    document.getElementById("teamsOutput").textContent = out;
}

function copyTeams(){
    const text = document.getElementById("teamsOutput").textContent;
    if(!text.trim()){
        alert("Gere os times primeiro!");
        return;
    }

    navigator.clipboard.writeText(text)
        .then(()=> alert("Times copiados! Pode colar no WhatsApp."))
        .catch(()=> alert("Erro ao copiar."));
}
</script>

</body>
</html>
